(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{167:function(e,t,a){e.exports=a(255)},172:function(e,t,a){},255:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(13),c=a.n(l),o=(a(172),a(329)),u=a(310),i=a(23),s=a.n(i),m=a(33),d=a(12),f=a(65),p=new f.a("DATA"),h={data:"++id,human_label,model_label,*contentWords",schema:"++id,name"},E=function(e){for(var t=new Set,a=2;a<e.length;a++)t.add(e.slice(a-2,a+1));return Array.from(t)};!function(){p.version(1).stores(h);p.data.hook("creating",function(e,t,a){"string"==typeof t.content&&(t.contentWords=E(t.content))}),p.data.hook("updating",function(e,t,a,n){if(e.hasOwnProperty("content"))return"string"==typeof e.content?{contentWords:E(e.content)}:{contentWords:[]}}),p.open()}();var v=function(e){return p.transaction("rw",p.data,function(){e.forEach(function(e){return p.data.add(e)})})},b=function(){var e=Object(m.a)(s.a.mark(function e(t){var a,n,r,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(a=E(t)).length){e.next=3;break}return e.abrupt("return",f.a.Promise.resolve([]));case 3:return e.next=5,f.a.Promise.all(a.map(function(e){return p.data.where("contentWords").equals(e).distinct().primaryKeys()}));case 5:if(0!==(n=e.sent).length){e.next=8;break}return e.abrupt("return",f.a.Promise.resolve([]));case 8:return r=n.reduce(function(e,t){var a=new Set(t);return e.filter(function(e){return a.has(e)})}),l=p.data.where("id").anyOf(r).toArray().then(function(e){return e.reduce(function(e,a){var n=a.content.search(t);if(-1!=n){var r=n+t.length;a.entities=[{start:n,end:r}],e.push(a)}return e},[])}),e.abrupt("return",l);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),g=function(e){try{var t=new RegExp(e);return p.data.filter(function(e){return t.test(e.content)}).toArray()}catch(a){return f.a.Promise.resolve([])}},x=function(e,t){return p.schema.add({name:e,color:t})},w=function(){return p.schema.toArray()},y=r.a.createContext("dbContext"),O=function(e){var t=r.a.useState(0),a=Object(d.a)(t,2),n=a[0],l=a[1],c=r.a.useState(!1),o=Object(d.a)(c,2),u=o[0],i=o[1],f=function(){return l(n+1)};r.a.useEffect(function(){i(!0)},[1]);var h={addDoc:function(e){f()},addDocsBatch:function(){var e=Object(m.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),updateDoc:function(e){f()},setDocCLass:function(e,t){(function(e,t){return p.data.update(e,{human_label:t})})(e,t).then(f)},updateDocsBatch:function(e){f()},search:function(){var e=Object(m.a)(s.a.mark(function e(t,a){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),regexSearch:function(){var e=Object(m.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),allDocs:function(){return function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p.data.toArray()}(20)},step:n};return r.a.createElement(y.Provider,{value:h},u?e.children:null)},C=function(){return r.a.useContext(y)},j=a(147),k=a(258),S=a(306),D=a(99),A=a(156),P=a(307),L=a(308),B=a(40),F=a(309),N=a(260),M=a(239),T=r.a.createContext("classContext"),W=function(e){var t=r.a.useState({}),a=Object(d.a)(t,2),n=a[0],l=a[1];r.a.useEffect(function(){w().then(function(e){l(e)})},[1]);var c=function(){var e=Object(m.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=M.getColor({text:t}),e.next=3,x(t,a);case 3:return e.next=5,w();case 5:n=e.sent,l(n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(T.Provider,{value:{classes:Object.values(n),addClass:c}},e.children)},_=function(){return r.a.useContext(T)},H=a(297),I=a(298),R=a(299),U=a(330),z=a(304),G=a(305),J=a(294),Q=function(e){var t=_(),a=r.a.useState(null),n=Object(d.a)(a,2),l=n[0],c=n[1],o=r.a.useState(!1),u=Object(d.a)(o,2),i=u[0],s=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{onClick:function(){return s(!0)}}),r.a.createElement(H.a,{open:i,onClose:function(){return s(!1)}},r.a.createElement(I.a,null,"Add a new class"),r.a.createElement(R.a,null,r.a.createElement(U.a,{onChange:function(e){return c(e.target.value)},value:l,label:"Choose a name for your class"})),r.a.createElement(z.a,null,r.a.createElement(G.a,{variant:"contained",color:"primary",disabled:null===l,onClick:function(){t.addClass(l),s(!1),c(null)}},"Add ",l))))},Y=function(e){var t=C(),a=_();return r.a.createElement(S.a,{container:!0,spacing:2},a.classes.map(function(a){return r.a.createElement(S.a,{item:!0},r.a.createElement(G.a,{variant:e.example.human_label===a.name?"contained":"outlined",onClick:function(){var n;n=a.name,t.setDocCLass(e.example.id,n)},style:{borderColor:a.color,background:e.example.human_label===a.name?a.color:void 0}},a.name))}))},q=Object(N.a)(function(e){return{root:{overflow:"auto",marginTop:"1rem"}}}),K=function(e){var t=q();return r.a.createElement("div",null,r.a.createElement(A.a,{className:t.root,id:e.example.id,style:{maxHeight:"80vh"}},r.a.createElement(P.a,{style:{paddingBottom:"1rem"},title:e.example.id,subheader:r.a.createElement(Y,{example:e.example,handleUpdateExample:e.handleUpdateExample})}),r.a.createElement(L.a,{style:{overflow:"auto",height:"75%"}},r.a.createElement(B.a,{style:{whiteSpace:"pre-line"}},e.example.content)),r.a.createElement(F.a,null)))},$="ALL",V="LABELED",X="UNLLABELED",Z=r.a.createContext("searchContext"),ee=function(e){var t=C(),a=r.a.useState(t.allDocs()),n=Object(d.a)(a,2),l=n[0],c=n[1],o=r.a.useState(null),u=Object(d.a)(o,2),i=u[0],s=u[1],m=r.a.useState(!1),f=Object(d.a)(m,2),p=f[0],h=f[1],E=r.a.useState($),v=Object(d.a)(E,2),b=v[0],g=v[1],x=r.a.useMemo(function(){switch(b){case V:return l.filter(function(e){return e.human_label});case X:return l.filter(function(e){return void 0===e.human_label});default:return l}},[b,l]);r.a.useEffect(function(){w(i)},[t.step]);var w=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t.regexSearch:t.search;!e||e.length<1?t.allDocs().then(function(e){c(e)}):(h(!0),a(e).then(function(e){c(e),h(!1)})),s(e)};return r.a.createElement(Z.Provider,{value:{examples:x,handleQueryChange:w,searching:p,labelFilter:b,setLabelFilter:g}},e.children)},te=function(){return r.a.useContext(Z)},ae=Object(k.a)(function(e){return{root:{"&:focus":{outline:0},"&::-webkit-scrollbar":{display:"hidden"}}}}),ne=function(e){var t=r.a.useState(0),a=Object(d.a)(t,2),n=a[0],l=a[1],c=r.a.useState(0),o=Object(d.a)(c,2),i=o[0],s=o[1],m=te(),f=r.a.useMemo(function(){return new D.b({defaultHeight:50,fixedWidth:!0})},[m.examples]),p=r.a.useCallback(function(e){null!==e&&0===n&&(l(e.clientHeight),s(e.clientWidth))}),h=m.examples,E=ae();return r.a.createElement(u.a,{style:{height:"86vh",marginTop:"2rem"}},r.a.createElement("div",{className:E.root,style:{position:"relative",height:"100%",width:"100%",overflow:"hidden"},ref:p},r.a.createElement(S.a,{container:!0,alignItems:"center",justify:"center"},r.a.createElement(D.c,{height:n,deferredMeasurementCache:f,rowHeight:f.rowHeight,rowRenderer:function(t){var a=t.index,n=(t.isScrolling,t.key),l=t.parent,c=t.style,o=h[a];return r.a.createElement(D.a,{cache:f,columnIndex:0,key:n,parent:l,rowIndex:a},function(t){return t.measure,r.a.createElement(S.a,{item:!0,xs:10,style:Object(j.a)({},c),key:n},r.a.createElement(K,{handleUpdateExample:e.handleUpdateExample,extraStyle:{style:c},orderIndex:1,key:o.id,example:o,anno_source:e.anno_source,schema:e.schema}))})},width:i,rowCount:h.length}))))},re=a(72),le=a(328),ce=a(334),oe=a(331),ue=a(302),ie=a(259),se=a(326),me=a(311),de=a(312),fe=Object(k.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},bigAvatar:{margin:10,width:120,height:60}}}),pe=function(e){var t=fe();return r.a.createElement(me.a,{position:"fixed",className:e.rootClass},r.a.createElement(de.a,null,r.a.createElement(B.a,{align:"left",variant:"h6",className:t.title},"Why Label When You Can Search ?")))},he=a(155),Ee=a(301),ve=a(332),be=a(300),ge=a(313),xe=a(314),we=a(303),ye=a(315),Oe=a(333),Ce=a(316),je=a(154),ke=function(e){return r.a.createElement(he.a,e,r.a.createElement("g",{id:"regular-expression"},r.a.createElement("path",{id:"left-bracket",d:"M3 12.045c0-.99.15-1.915.45-2.777A6.886 6.886 0 0 1 4.764 7H6.23a7.923 7.923 0 0 0-1.25 2.374 8.563 8.563 0 0 0 .007 5.314c.29.85.7 1.622 1.23 2.312h-1.45a6.53 6.53 0 0 1-1.314-2.223 8.126 8.126 0 0 1-.45-2.732"}),r.a.createElement("path",{id:"dot",d:"M10 16a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"}),r.a.createElement("path",{id:"star",d:"M14.25 7.013l-.24 2.156 2.187-.61.193 1.47-1.992.14 1.307 1.74-1.33.71-.914-1.833-.8 1.822-1.38-.698 1.296-1.74-1.98-.152.23-1.464 2.14.61-.24-2.158h1.534"}),r.a.createElement("path",{id:"right-bracket",d:"M21 12.045c0 .982-.152 1.896-.457 2.744A6.51 6.51 0 0 1 19.236 17h-1.453a8.017 8.017 0 0 0 1.225-2.31c.29-.855.434-1.74.434-2.66 0-.91-.14-1.797-.422-2.66a7.913 7.913 0 0 0-1.248-2.374h1.465a6.764 6.764 0 0 1 1.313 2.28c.3.86.45 1.782.45 2.764"})))},Se=function(e){var t=r.a.useState(!1),a=Object(d.a)(t,2),n=a[0],l=a[1],c=te(),o=Object(je.useDebouncedCallback)(function(e){c.handleQueryChange(e,n)},250),u=Object(d.a)(o,1)[0];return r.a.createElement(S.a,{container:!0},r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(Ee.a,null,r.a.createElement(ve.a,{htmlFor:"searchbar"},"Search for something"),r.a.createElement(be.a,{id:"searchbar",type:"text",onChange:function(e){return u(e.target.value)},endAdornment:r.a.createElement(ge.a,{position:"end"},r.a.createElement(xe.a,{"aria-label":"Toggle regex",onClick:function(){l(!n)},color:n?"primary":void 0},r.a.createElement(ke,null)))}),r.a.createElement(we.a,{id:"weight-helper-text"},c.searching?r.a.createElement(ye.a,null):"Runs a full text search on your data"))),r.a.createElement(S.a,{item:!0,xs:12,style:{marginTop:"1rem"}},r.a.createElement(Oe.a,{exclusive:!0,value:c.labelFilter,onChange:function(e,t){return c.setLabelFilter(t)},size:"small"},r.a.createElement(Ce.a,{value:$},"All"),r.a.createElement(Ce.a,{value:V,size:"small"},"Done"),r.a.createElement(Ce.a,{value:X,size:"small"},"Empty")),r.a.createElement(S.a,{item:!0,xs:12},r.a.createElement(B.a,null,c.examples.length," examples in group"))))},De=a(327),Ae=a(320),Pe=a(322),Le=a(325),Be=a(321),Fe=a(323),Ne=a(324),Me=a(157),Te=a(317),We=a(318);function _e(e){return new Promise(function(t,a){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=a,n.readAsText(e)})}var He=function(e){var t=function(){var t=Object(m.a)(s.a.mark(function t(a,n){var r,l,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.target.files[0],t.next=3,_e(r);case 3:l=t.sent,c=JSON.parse(l),e.handleNewData(c);case 6:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement(U.a,{type:"file",label:"Add a file",onChange:t,helperText:"Select a file"})},Ie=function(e){var t=r.a.useState(null),a=Object(d.a)(t,2),n=a[0],l=a[1],c=r.a.useState([]),o=Object(d.a)(c,2),u=o[0],i=o[1],s=r.a.useState(null),m=Object(d.a)(s,2),f=m[0],p=m[1],h=r.a.useState(!1),E=Object(d.a)(h,2),v=E[0],b=E[1],g=C();return r.a.createElement("form",null,r.a.createElement(He,{handleNewData:function(e){i(Object.keys(e[0])),l(e)}}),r.a.createElement(Me.a,{in:u.length},r.a.createElement(U.a,{onChange:function(e){return p(e.target.value)},value:f,select:!0,label:"Text Field",helperText:"Please select the field in the data we'll be labeling",margin:"normal"},u.map(function(e){return r.a.createElement(Te.a,{value:e},e)}))),v?r.a.createElement(We.a,null):r.a.createElement(G.a,{onClick:function(){b(!0);var e=n.map(function(e,t){return{content:e[f]}});g.addDocsBatch(e).then(function(){return b(!1)})},disabled:null===f,variant:"outlined",color:"primary"},"Load Data"))},Re=function(e){var t=r.a.useState(!1),a=Object(d.a)(t,2),n=a[0],l=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,{color:"inherit",onClick:function(){return l(!0)}},r.a.createElement(J.a,null)),r.a.createElement(H.a,{open:n,onClose:function(){return l(!1)}},r.a.createElement(I.a,null,"Add some data"),r.a.createElement(R.a,null,r.a.createElement(Ie,null))))},Ue=a(319),ze=function(e){var t=r.a.useState(!1),a=Object(d.a)(t,2),n=a[0],l=a[1],c=r.a.useState(!1),o=Object(d.a)(c,2),u=o[0],i=o[1],h=function(){var e=Object(m.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,f.a.Promise.all([p.data.clear(),p.schema.clear()]);case 3:l(!1),i(!1);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,{color:"inherit",onClick:function(){return l(!0)}},r.a.createElement(Ue.a,null)),r.a.createElement(H.a,{open:n,onClose:function(){return l(!1)}},r.a.createElement(I.a,null,"Erase all the data"),r.a.createElement(z.a,null,u?r.a.createElement(We.a,null):r.a.createElement(G.a,{onClick:h,variant:"contained",color:"danger"},"Yes Erase It"))))},Ge=function(e){var t=r.a.useState(!0),a=Object(d.a)(t,2),n=a[0],l=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,{button:!0,key:"Data",onClick:function(){return l(!n)}},r.a.createElement(Ae.a,null," ",r.a.createElement(Be.a,null)),r.a.createElement(Pe.a,{primary:"Data"}),n?r.a.createElement(Fe.a,null):r.a.createElement(Ne.a,null)),r.a.createElement(Le.a,{in:n,timeoute:"auto",unmountOnExit:!0},r.a.createElement(ue.a,null,r.a.createElement(ie.a,null,r.a.createElement(Ae.a,null,r.a.createElement(Re,null)),r.a.createElement(Pe.a,{primary:"Add More Data"})),r.a.createElement(ie.a,null,r.a.createElement(Ae.a,null,r.a.createElement(ze,null)),r.a.createElement(Pe.a,{primary:"Delete All Data"})))))},Je=function(e){return r.a.createElement(ue.a,null,r.a.createElement(Ge,null),r.a.createElement(ie.a,{button:!0},r.a.createElement(Ae.a,null,r.a.createElement(Q,null)),r.a.createElement(Pe.a,{primary:"Classes"})))},Qe=Object(k.a)(function(e){return{root:{display:"flex"},drawer:Object(re.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(re.a)({marginLeft:240},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)")}),menuButton:Object(re.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)}}}),Ye=function(e){var t=e.container,a=Qe(),n=Object(se.a)(),l=r.a.useState(!1),c=Object(d.a)(l,2),o=c[0],u=c[1];function i(){u(!o)}var s=r.a.createElement("div",null,r.a.createElement("div",{className:a.toolbar},r.a.createElement(De.a,{style:{paddingTop:"25%"},image:"/ylabel/img/logo.png"})),r.a.createElement(le.a,null),r.a.createElement(ue.a,null,r.a.createElement(ie.a,null,r.a.createElement(Se,null))),r.a.createElement(le.a,null),r.a.createElement(Je,null));return r.a.createElement("div",{className:a.root},r.a.createElement(pe,{handleDrawerToggle:i,rootClass:a.appBar}),r.a.createElement("nav",{className:a.drawer,"aria-label":"Mailbox folders"},r.a.createElement(oe.a,{smUp:!0,implementation:"css"},r.a.createElement(ce.a,{container:t,variant:"temporary",anchor:"rtl"===n.direction?"right":"left",open:o,onClose:i,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0}},s)),r.a.createElement(oe.a,{xsDown:!0,implementation:"css"},r.a.createElement(ce.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0},s))),r.a.createElement("main",{className:a.content},e.children))};var qe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,null,r.a.createElement(O,null,r.a.createElement(ee,null,r.a.createElement(o.a,null),r.a.createElement(Ye,null,r.a.createElement(u.a,null,r.a.createElement(ne,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(qe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[167,1,2]]]);
//# sourceMappingURL=main.0af879f7.chunk.js.map