(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{154:function(e,t,n){e.exports=n(246)},159:function(e,t,n){},246:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(14),c=n.n(l),o=(n(159),n(302)),u=n(297),i=n(16),s=n.n(i),m=n(23),f=n(15),d=n(66),h=n(303),p=n(284),E=n(306),v=n(285),b=n(286);n(164);function g(e){return new Promise(function(t,n){var a=new FileReader;a.onload=function(){t(a.result)},a.onerror=n,a.readAsText(e)})}var x=function(e){var t=function(){var t=Object(m.a)(s.a.mark(function t(n,a){var r,l,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.files[0],t.next=3,g(r);case 3:l=t.sent,c=JSON.parse(l),e.handleNewData(c);case 6:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}();return r.a.createElement(h.a,{type:"file",label:"Add a file",onChange:t,helperText:"Select a file"})},w=function(e){var t=r.a.useState(null),n=Object(f.a)(t,2),a=n[0],l=n[1],c=r.a.useState([]),o=Object(f.a)(c,2),u=o[0],i=o[1],s=r.a.useState(null),m=Object(f.a)(s,2),d=m[0],g=m[1],w=r.a.useState(!1),y=Object(f.a)(w,2),O=y[0],C=y[1],j=F();return r.a.createElement("form",null,r.a.createElement(x,{handleNewData:function(e){i(Object.keys(e[0])),l(e)}}),r.a.createElement(p.a,{in:u.length},r.a.createElement(h.a,{onChange:function(e){return g(e.target.value)},value:d,select:!0,label:"Text Field",helperText:"Please select the field in the data we'll be labeling",margin:"normal"},u.map(function(e){return r.a.createElement(E.a,{value:e},e)}))),O?r.a.createElement(v.a,null):r.a.createElement(b.a,{onClick:function(){C(!0);var e=a.map(function(e,t){return{content:e[d]}});j.addDocsBatch(e).then(function(){return C(!1)})},disabled:null===d,variant:"outlined",color:"primary"},"Load Data"))},y=new d.a("INDEX12");y.version(1).stores({elastic:"id,content"});var O=function(){var e=Object(m.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.elastic.delete(1);case 2:window.location.reload();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),C=new d.a("DATA"),j={data:"++id,human_label,model_label,*contentWords",schema:"++id,name"},k=function(e){for(var t=new Set,n=2;n<e.length;n++)t.add(e.slice(n-2,n+1));return Array.from(t)};!function(){C.version(1).stores(j);C.data.hook("creating",function(e,t,n){"string"==typeof t.content&&(t.contentWords=k(t.content))}),C.data.hook("updating",function(e,t,n,a){if(e.hasOwnProperty("content"))return"string"==typeof e.content?{contentWords:k(e.content)}:{contentWords:[]}}),C.open()}();var S=function(e){return C.transaction("rw",C.data,function(){e.forEach(function(e){return C.data.add(e)})})},D=function(){var e=Object(m.a)(s.a.mark(function e(t){var n,a,r,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=k(t),e.next=3,d.a.Promise.all(n.map(function(e){return C.data.where("contentWords").equals(e).distinct().primaryKeys()}));case 3:return a=e.sent,r=a.reduce(function(e,t){var n=new Set(t);return e.filter(function(e){return n.has(e)})}),l=C.data.where("id").anyOf(r).toArray().then(function(e){return e.filter(function(e){return-1!==e.content.search(t)})}),e.abrupt("return",l);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),A=function(e,t){return C.schema.add({name:e,color:t})},N=function(){return C.schema.toArray()},W=(n(180),r.a.createContext("dbContext")),P=function(e){var t=r.a.useState(0),n=Object(f.a)(t,2),a=n[0],l=n[1],c=r.a.useState(!1),o=Object(f.a)(c,2),u=o[0],i=o[1],d=function(){return l(a+1)};r.a.useEffect(function(){i(!0)},[1]);var h={addDoc:function(e){d()},addDocsBatch:function(){var e=Object(m.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:e.sent;case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),updateDoc:function(e){d()},updateDocsBatch:function(e){var t=!0,n=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(t=(r=l.next()).done);t=!0)r.value}catch(c){n=!0,a=c}finally{try{t||null==l.return||l.return()}finally{if(n)throw a}}d()},search:function(){var e=Object(m.a)(s.a.mark(function e(t,n){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),allDocs:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return C.data.limit(e).toArray()}(20)},step:a};return r.a.createElement(W.Provider,{value:h},u?e.children:null)},F=function(){return r.a.useContext(W)},_=n(148),B=n(249),T=n(292),U=n(147),I=n(248),R=n(293),H=n(294),J=n(69),G=n(295),Q=n(250),q=n(241),K=r.a.createContext("classContext"),L=function(e){var t=r.a.useState({}),n=Object(f.a)(t,2),a=n[0],l=n[1];r.a.useEffect(function(){N().then(function(e){l(e)})},[1]);var c=function(){var e=Object(m.a)(s.a.mark(function e(t){var n,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=q.getColor({text:t}),e.next=3,A(t,n);case 3:return e.next=5,N();case 5:a=e.sent,l(a);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(K.Provider,{value:{classes:Object.values(a),addClass:c}},e.children)},X=function(){return r.a.useContext(K)},Y=n(287),$=n(305),z=n(289),M=n(290),V=n(291),Z=n(288),ee=function(e){var t=X(),n=r.a.useState(null),a=Object(f.a)(n,2),l=a[0],c=a[1],o=r.a.useState(!1),u=Object(f.a)(o,2),i=u[0],s=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{onClick:function(){return s(!0)}},r.a.createElement(Z.a,null)),r.a.createElement($.a,{open:i,onClose:function(){return s(!1)}},r.a.createElement(z.a,null,"Add a new class"),r.a.createElement(M.a,null,r.a.createElement(h.a,{onChange:function(e){return c(e.target.value)},value:l,label:"Choose a name for your class"})),r.a.createElement(V.a,null,r.a.createElement(b.a,{variant:"contained",color:"primary",disabled:null===l,onClick:function(){t.addClass(l),s(!1),c(null)}},"Add ",l))))},te=function(e){var t=X(),n=function(t){var n,a;(n=e.example.id,a=t,C.data.update(n,{human_label:a})).then(e.handleUpdateExample)};return r.a.createElement(T.a,{container:!0,spacing:2},r.a.createElement(T.a,{item:!0},r.a.createElement(ee,null)),t.classes.map(function(t){return r.a.createElement(T.a,{item:!0},r.a.createElement(b.a,{variant:e.example.human_label==t.name?"contained":"outlined",onClick:function(){n(t.name)},style:{borderColor:t.color,background:e.example.human_label===t.name?t.color:void 0}},t.name))}))},ne=Object(Q.a)(function(e){return{root:{height:"80%",overflow:"auto"}}}),ae=function(e){var t=ne();return r.a.createElement(I.a,{className:t.root,id:e.example.id},r.a.createElement(R.a,{title:e.example.id}),r.a.createElement(H.a,null,r.a.createElement(J.a,null,e.example.content)),r.a.createElement(G.a,null,r.a.createElement(te,{example:e.example,handleUpdateExample:e.handleUpdateExample})))},re=n(296),le=n(146),ce=r.a.createContext("searchContext"),oe=function(e){var t=F(),n=r.a.useState(t.allDocs()),a=Object(f.a)(n,2),l=a[0],c=a[1],o=r.a.useState(null),u=Object(f.a)(o,2),i=u[0],s=u[1],m=r.a.useState(!1),d=Object(f.a)(m,2),h=d[0],p=d[1];r.a.useEffect(function(){E(i)},[t.step]);var E=function(e){!e||e.length<1?t.allDocs().then(function(e){c(e)}):(p(!0),t.search(e).then(function(e){c(e),p(!1)})),s(e)};return r.a.createElement(ce.Provider,{value:{examples:l,handleQueryChange:E,searching:h}},e.children)},ue=function(){return r.a.useContext(ce)},ie=function(e){var t=ue(),n=Object(le.useDebouncedCallback)(function(e){t.handleQueryChange(e)},250),a=Object(f.a)(n,1)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{type:"text",label:"Search for something",helperText:t.searching?r.a.createElement(re.a,null):"Runs a full text search on your data",onChange:function(e){a(e.target.value)},fullWidth:!0}))},se=Object(B.a)(function(e){return{root:{"&:focus":{outline:0},"&::-webkit-scrollbar":{display:"hidden"}}}}),me=function(e){var t=r.a.useState(0),n=Object(f.a)(t,2),a=n[0],l=n[1],c=r.a.useState(0),o=Object(f.a)(c,2),i=o[0],s=o[1],m=ue(),d=r.a.useCallback(function(e){null!==e&&0===a&&(l(e.clientHeight),s(e.clientWidth))}),h=m.examples,p=h.length>1?a/3:2*a/3,E=h.length>1?2*p:a,v=se();return r.a.createElement(u.a,{style:{height:"85vh"}},r.a.createElement("div",{className:v.root,style:{position:"relative",height:"100%",width:"100%",overflow:"hidden"},ref:d},h.length," examples",r.a.createElement(T.a,{container:!0},r.a.createElement(U.a,{height:a,rowHeight:E,rowRenderer:function(t){var n=t.index,a=t.key,l=t.style,c=h[n];return r.a.createElement(T.a,{item:!0,xs:12,style:Object(_.a)({},l),key:a},r.a.createElement(ae,{handleUpdateExample:e.handleUpdateExample,extraStyle:{style:l},orderIndex:1,key:c.id,example:c,anno_source:e.anno_source,schema:e.schema,maxHeight:p}))},width:i,rowCount:h.length}))))},fe=function(e){var t=r.a.useState(!1),n=Object(f.a)(t,2),a=n[0],l=n[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{color:"inherit",onClick:function(){return l(!0)}},r.a.createElement(Z.a,null)),r.a.createElement($.a,{open:a,onClose:function(){return l(!1)}},r.a.createElement(z.a,null,"Add some data"),r.a.createElement(M.a,null,r.a.createElement(w,null))))},de=n(298),he=function(e){var t=r.a.useState(!1),n=Object(f.a)(t,2),a=n[0],l=n[1],c=r.a.useState(!1),o=Object(f.a)(c,2),u=o[0],i=o[1],d=function(){var e=Object(m.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,O();case 3:l(!1),i(!1);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{color:"inherit",onClick:function(){return l(!0)}},r.a.createElement(de.a,null)),r.a.createElement($.a,{open:a,onClose:function(){return l(!1)}},r.a.createElement(z.a,null,"Erase all the data"),r.a.createElement(V.a,null,u?r.a.createElement(v.a,null):r.a.createElement(b.a,{onClick:d,variant:"contained",color:"danger"},"Yes Erase It"))))},pe=n(299),Ee=n(300),ve=n(301),be=Object(B.a)(function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},bigAvatar:{margin:10,width:120,height:60}}}),ge=function(){var e=be();return r.a.createElement("div",{className:e.root},r.a.createElement(pe.a,{position:"static"},r.a.createElement(Ee.a,null,r.a.createElement(ve.a,{src:"/ylabel/img/logo.png",title:"Paella dish",className:e.bigAvatar}),r.a.createElement(J.a,{align:"center",variant:"h6",className:e.title},r.a.createElement(u.a,null,r.a.createElement(ie,null))),r.a.createElement(fe,null),r.a.createElement(he,null))))};var xe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,null,r.a.createElement(P,null,r.a.createElement(oe,null,r.a.createElement(ge,null),r.a.createElement(o.a,null),r.a.createElement(u.a,null,r.a.createElement(me,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(xe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[154,1,2]]]);
//# sourceMappingURL=main.9ef61f86.chunk.js.map